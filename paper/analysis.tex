\section{Exploring namespace design choices}
\label{sec:design}

Throughout this section we will refer to the concept of the decentralized algorithmic agent that we introduced in Section \ref{sec:model}. Several of the options we explore will require this agent to implement rather complex algorithms. We will not directly address the question of practical feasibility of complex decentralized agents. We note, however, that based on proposed designs, these agents can be surprisingly powerful; we refer the reader to \cite{bonneau2014decentralizing,ethereumwhitepaper,agents}.


\subsection{Control of names}
At any point in time, each name is either controlled by some user or is unclaimed. In the latter case, it can be considered to be owned by the decentralized agent encoded into the cryptocurrency, and is on the primary market. Any user can attempt to purchase any name on the primary market. We will return to the question of how the name is priced. 

When a name is controlled by a user, how strong is that control? We can consider a hierarchy of increasingly weaker forms of control.

{\em 1. Control lasts forever and names cannot be transferred.} It is straightforward to design a namespace in such a way that names are non-transferable (in Namecoin, it would be a matter of requiring the input and output of a {\tt NAME\_UPDATE} transaction to have the same address). Making names non-transferable would lock authority to update to the value restricted to the key used to first register the name. Such a system could deter speculative squatters because a speculator would not be able to sell a name to another individual. While it would be possible to transfer the private key that controls a name, the user receiving it would have no cryptographic assurance that the original owner does still posses a copy of the key. On the other hand squatters who wish to censor names or simply damage the system would be undeterred by the inability to transfer names.

As we noted in Section \ref{sec:model}, utility functions are time-varying, so a technical restriction against name transfer goes against the logic of the market. It is possible that most names would be controlled by squatters who act as dealers and lease names to users. Essentially this would make the system a hybrid between a centralized and a decentralized namespace.


{\em 2. Control lasts forever except if the user chooses to transfer or sell the name.} This approach is easy to understand as it is the most similar to physical property. A practical problem with this approach is that if a user loses her key, any names controlled by that user or key are lost forever. This may also happen if a user leaves the system, but this problem can be alleviated by having the primary market agent buy back names from users. This incentivizes the user to give up the name before leaving the system even if she can't find a seller for it. The agent essentially acts as an automated market maker.

{\em 3. Names expire after a fixed period, except if the user renews it.} This is a practical choice that avoids the problems pointed out above, especially if the renewal fee is very small compared to the price of the name on the primary market. We expect that a rational user will keep renewing a name she controls unless her utility drops to near-zero, or she loses the associated private key and therefore can't update the name. If the renewal fee is substantial, this becomes similar to a lease instead of ownership. The renewal fee is paid to the agent. 

Finally, the agent may pay the user if she lets her name expires, returning her original fee to her. This is analogous to a deposit.

{\em 4. Names always expire after a fixed period and return to the primary market.} 
Seizure or censorship becomes easy. Additionally, if we imagine that names appreciate in price by being used, just as land that is developed increases in value, this disincentivizes users from putting names to use since they have no expectation of being able to hold on to them. 
So this model is clearly inappropriate for applications like domain names, but perhaps useful in other contexts. 
%We could stipulate that the user receive a percentage (or all) of the revenue when the name is sold again, but it is not clear to what extent this will mitigate the problem.


{\em 5. Control over names may be pre-empted by other users.} 
This is an idea that has been proposed  several times in the context of Namecoin, allowing users to either force a name to return to the primary market or even directly acquire it by paying the a fee to the agent and/or the current owner. This is intended to alleviate squatting, but it is hard to imagine this approach being superior to a functioning secondary market. On the other hand, the downsides are clear: seizures are now possible, and as before, uncertainty over future ownership may discourage legitimate use.

%Conversely, if names expire, this could be implemented in a variety of ways. First, a user could be responsible for releasing the name. If there is no monetary incentive to do so, then this situation is very similar to names never expiring and shares many of the same issues. A fee or refund upon releasing a name represents a change in the fee structure of the system. If a user is not responsible for releasing their own names, but they do expire, then the protocol should dictate that some other external event causes a user to lose ownership of a name. In the current model of Namecoin, this is implemented with the expiration time-- specifically, a name expires after a certain number of blocks. It is also possible that a name could be forced to expire if another user performs an action. Unless the current owner of the name has no way to defend themselves from having the name taken, then this represents another behavior that would need to be controlled with fees. 

\subsection{Markets and fees}

{\bf Primary market: auctions vs. algorithmic pricing.} There are essentially two choices for the primary market: auction and algorithmic pricing. Auctions are appealing, but there are practical problems due to the infinite number of names. For example, let's say an auction for a name is triggered whenever any user expresses an interest in buying that name. Since there are a potentially infinite number of names that a user is interested in, she would have to be able to participate in an auction at any time, which is a problematic assumption. Alternatively, names could go up for auction at fixed times, but this also has practical downsides.

On the other hand, names can be priced algorithmically. This is more applicable for applications like domain names than for personal namespaces. In the former case the utility of a name is less dependent on the user and therefore easier to price based on publicly available data. Several factors based on publicly available data can be incorporated into the pricing model: name length, frequency of the name (treated as a word) in text found on the web,  traffic rank of the corresponding .com domain, and so on. Pricing can also vary with time; a blended model between auctions and algorithmic pricing would see initial prices decided algorithmically which decline steadily over time in a form of Dutch auction. Again the challenges in implementing this are practical: incorporating data external to the block chain into the computation of distributed agents is possible, but very complex and has not been successfully demonstrated in practice. If the secondary market is implemented within the system (see below), then the agent has access to pricing data for other similar names as well as for the same name if it was previously sold on the secondary market.

There is an interesting technical limitation of agents which affects algorithmic pricing. Since the agent doesn't have private storage, an adversarial node in the peer-to-peer network can intercept a user's request to the agent to purchase a name, and try to purchase that name ahead of the user, perhaps in the hope of turning around and selling it to the user. This is analogous to front running. In fact, front running is a problem in the current DNS as well, carried out by intermediaries that provide domain registry search services \cite{frontrunning}. Fortunately, in the cryptocurrency context there's a simple cryptographic solution: the user first presents a sealed bid to the agent (here it is the name that needs to be sealed, not the price, which is public); after this message is confirmed in the block chain, the user (from the same address) reveals the name. Now the adversary cannot front run the user because he cannot spoof messages (transactions) from the user's address.\footnote{This is the approach used in Namecoin, and the reason why {\tt NAME\_NEW} and {\tt NAME\_FIRSTUPDATE} need to be distinct operations separated by a 12-block waiting period, as described in Section \ref{subsec:technical_details_of_names}.}


Namecoin uses a simple model of a flat fee for all domains that varies with time (which we can think of as a trivial case of algorithmic pricing).

{\bf Secondary market.} As long as the technical capability to transfer names exist, we would expect a secondary market to develop without any further design support. In addition, the ability to transfer names and payment in a single atomic transaction allows parties to transact without a trusted intermediary. This is straightforward to implement technically as we discussed in Section \ref{sec:methods}; Bitcoin and most altcoins including Namecoin support it. 

However, there are benefits to the capability to post bids and offers on the block chain as well as execute trades. First, as a practical matter, when cryptocurrencies are in the bootstrapping stage, exchanges may not develop or may be fragmented. We see this problem with Namecoin. Secondary markets for DNS names are also fragmented. A fragmented or non-existent secondary market may in turn inhibit adoption of the namespace. Integrating an exchange (implemented, of course, in a decentralized form) may prevent this problem. As an interesting historical aside, early versions of Satoshi Nakamoto's Bitcoin code contained exchange functionality in prototype stage, but this was never rolled out \cite{bitcoin}.  Second, as mentioned above, executing trades via the block chain allows the agent direct access to price data, and this may help with algorithmic pricing. Finally, integrating an exchange allows shaping the secondary market, for example, by charging a fee for trades. As mentioned earlier, it is technically feasible to deter private trades; this would force or incentivize trades to happen through the integrated exchange.

\subsection{The agent's finances}
In a centralized namespace, the owner of the namespace has a clear goal of maximizing revenue from name sales. In a decentralized system, this is typically not a meaningful goal. After all, the agent is not a real-world entity.  How, then, should the agent handle its finances? 

Our first simplifying observation is that there is no point in the agent holding on to any funds --- even if it needs to buy names from users, it can simply print money (introduce new coins into the system) as necessary. Of course, from a practical perspective it may be easier to have the agent store funds; this corresponds to the proposal in Namecoin to treat registration fees as deposits and to hold them in ``escrow'' \cite{escrow}. Conceptually, however, we can get rid of this option.

That leaves two options. The first is to distribute its revenue to miners, in proportion to their hash power at the time of the transaction. This is technically straightforward to do by structuring payments as transaction fees to be collected by the miner who first mines a block containing that transaction. The other option is to ``burn'' the coins representing the payment, i.e., mark them as permanently unspendable. This is also technically trivial. Assuming that the market capitalization of the currency is unaffected by burning some of it, it has the effect of distributing the agent's revenue to all holders of the currency in proportion to their holding. Both of these appear to be reasonable options, and Namecoin has used both; it is not clear which is better in terms of incentivizing the long-term growth and security of the system.

%    Many changes to the protocol would require a change in the fee structure. As it exists in Namecoin now, the only cost for an individual to register a name is the 0.01 NMC used to make the token, and then 0.01 NMC to cover two transactions fees (0.005 NMC each), one for the {\tt NAME\_NEW} and one for the {\tt NAME\_FIRSTUPDATE} transaction. Holding onto a name bares almost no cost with the owner only needing to pay 0.005 NMC as a transaction fee every time they post a {\tt NAME\_UPDATE} transaction (which they need to do about once every 250 days). Losing a name doesn't cost a user anything, and the user gets gets the initial 0.01 NMC token back as a normal coin. Namecoin, or any cryptocurrency trying to implement a name value store, could change these fees in a variety of ways. We have split up the different payment structures into a set of several parameters. Any structure for payments required by the user is some combination of the following parameters: a trigger for a payment, how much an individual needs to pay, and who an individual pays. If a user succeeds in payment of a fee, they attain or retain a name. If they fail, then the name is reclaimed by the system, or ownership is given to another individual. 

%    The first parameter of a payment structure is what triggers a required payment. All payment strategies will need to enforce when someone pays a fee, and we refer to the events that can cause a user to pay as a trigger. Triggers can be divided into two categories, one in which the trigger occurs after the owner of a name does something, and the other in which some external event causes a trigger for a name. Any time a user wants to do something with a name, this can represent a trigger. The first example of a trigger is when a user wants to register a name for the first time. In Namecoin, this is one of the implemented triggers that causes a user to pay a fee. A user is also able to update the contents of a value, trade a name token to another user and post a transaction to renew a name token. All of these are potential triggers that could have associated fees attached. 

%    Conversely, there could be some sort of trigger that is not caused by the owner of a name. We refer to this trigger category as a challenge. A challenge could be initiated several ways. First, they could be periodic. It is not unreasonable to think that a user could be required to make some action (pay a fee) after a set number of blocks. Moreover, it is possible that the specific period of time could also depend on another parameter, such as the fee that will be charged. Additionally, a challenge could be issued by another user of the system. If two users want the same name, there could be a mechanism in which the user who doesn't own the name is able to challenge the current owner. This type of trigger is necessary for overcoming certain issues associated with squatting. 

%    An additional parameter is how much a user is expected to pay. The decision of how much a user is expected to pay immediately breaks into two categories: the first being the amount they are expected to pay is determined by the protocol built into the system, and the second being the amount they are expected to pay is determined by users of the system. 

%We first consider the fees being determined by the protocol built into the system. This category again immediately breaks into two subcategories. The fee invoked by the system could either be constant, or it could depend on some other variable. A constant fee by the system is the current approach in Namecoin, and requires little additional analysis. Alternatively, if the fee varies, there are a variety of protocols the system could implement to determine the cost for a name. Historically in Namecoin, there was an additional fee levied by the system that varied based on time. A fee that varies on time could be used to deter users from buying names at specific times and incentivize users to buy names at other times. Additionally, the fee could vary based on properties of the name itself. It has been suggested that perhaps shorter names are more valuable and should be more expensive for a user to purchase. Using this strategy, one could develop a scheme where the cost to register a name is directly dependent on the name's length. More broadly, this could be applied to other aspects of a name. It could cost more based on whether or not it is a dictionary word, a concatenation of dictionary words, the frequency of the word's usage in English, whether or not the name is the same as a domain in the Alexa top million list, or any other criteria. Arguably, some of these pricing strategies are harder to implement than others because a miner will need to enforce the rules for a user trying to claim a name which means that all miners would need to agree about which criteria are true for a given name.

%The other method for determining how much a user should pay was that the cost could be determined by the users of the system. This pricing scheme represents a form of auction for each name. The specifics for the auction can vary, depending on the design, and any form of technically feasible auction would generate a system in which users determine the price a name should cost. \hi{add more information about types of auctions?} Allowing users to determine the price of a name weakens certain properties of a name value store in a blockchain. Namecoin advertises that one of the advantages of .bit domains (as opposed to traditional domains managed by ICANN) is that they cannot be seized and allow for freedom of speech and expression. By allowing users of the system to determine how much an individual needs to pay for a name can make it possible for a user with lots of resources to prevent a less affluent user from being able to use a certain name. A possible solution to this issue is to have the system enforce a maximum on the fee determined by other users. 

%    A final parameter is who a user pays. There are four options of who a user can pay a fee to. First, a user can pay a fee to a miner. This is the result of any fee that arises as a tip for a miner managing a user's name transactions. This has the effect that it incentivizes miners to include name transactions in their blocks. If the fees that users pay to miners start to get large (compared to the block reward), these fees can complicate the optimal strategies for miners. A second option is that a user can burn coins. Initially, burning coins can seem like a bad practice, but it is actually a clean way to distribute the payment amongst users of the system. Making the assumption that the value of a cryptocurrency market cap doesn't change, then if some of the coins are destroyed, the remain coins increase in value. \hi{not sure we need this next part} Cryptocurrency users have voiced concerns about burning too many coins. As long as the number of coins burned is a function of the number of coins remaining in the market, all of the coins can never be burned. What is lost is granularity as the smallest coin dust beings to be worth more and more. The granularity of a cryptocurrency like Namecoin is so small, however, that increasing the granularity by burning coins is hardly a problem. Almost all of the coins in the system would need to be burned for the granularity of the smallest coin (10 e-8 NMC) to be practically too large. A third option for the destination of a user's money for is into an escrow fund. This would cause a user to lock away funds that will be returned to them once they lose control over a name. This has a very similar effect to burning the money except the user is returned the coins if they ever lose control of a name. A fourth and final option for who a user should pay is another user of the system. This makes sense mostly in the context of auctions as a different user may already possess the desired name and is willing to sell it, but it can also be applied in other situations.


